<?xml version="1.0" encoding="US-ASCII"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd">

<?rfc sortrefs="yes"?>
<?rfc subcompact="no"?>
<?rfc symrefs="yes"?>
<?rfc toc="yes"?>
<?rfc tocdepth="3"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>

<rfc category="info" docName="draft-ymbk-rpki-rov-timing-00" ipr="trust200902">

<front>

    <title abbrev="RPKI Timers">
        Timing Parameters in the RPKI based BGP Origin Validation Pipeline
    </title>

    <author fullname="Randy Bush" initials="R." surname="Bush">
      <organization>Internet Initiative Japan &amp; Arrcus, Inc.</organization>
      <address>
        <postal>
          <street>5147 Crystal Springs</street>
          <city>Bainbridge Island</city>
          <region>Washington</region>
          <code>98110</code>
          <country>United States of America</country>
        </postal>
        <email>randy@psg.com</email>
      </address>
    </author>

    <author fullname="Job Snijders" initials="J." surname="Snijders">
        <organization abbrev="NTT">NTT Ltd.</organization>
        <address>
            <postal>
                <street>Theodorus Majofskistraat 100</street>
                <code>1065 SZ</code>
                <city>Amsterdam</city>
                <country>The Netherlands</country>
            </postal>
            <email>job@ntt.net</email>
        </address>
    </author>
	
    <date />

    <abstract>
        <t>
            This document explores operational implications of various
            scheduling aspects of the publication, propagation, and use of
            Resource Public Key Infrastructure data.
            The document concludes with a set of recommendations designed to
            optimise use of RPKI data in the global Internet routing system.
      </t>
    </abstract>

  <note title="Requirements Language">

    <t>
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
      "MAY", and "OPTIONAL" in this document are to be interpreted as
      described in BCP 14 <xref target="RFC2119"/> <xref
      target="RFC8174"/> when, and only when, they appear in all
      capitals, as shown here.
    </t>

  </note>

</front>

<middle>

  <section anchor="Intro" title="Introduction">
    
    <t>
      As Resource Public Key Infrastructure (RPKI) based Route Origin
      Validation (ROV) becomes deployed in the Internet, the quality of
      the routing control plane, and hence timely and accurate delivery
      of packets in the data plane, depend more and more on prompt and
      accurate propagation of the RPKI data from the originating
      Certification Authorities (CAs), to Relying Parties (RPs), to
      External Border Gateway Protocol (EBGP) routers.
    </t>

    <t>
      Origination Validation based on stale ROAs allows accidental
      mis-origination.  While delayed ROA propagation to ROV in routers
      can cause loss of good traffic.  Though it may not be reasonable
      today, services such as DDoS cleaners would prefer that ROA
      publication had near immediate effect on routing.
    </t>
    
    <t>
      This draft is an exploration of, and recommendations for, timing
      of Resource Public Key Infrastructure publication, propagation,
      and use in relying party caches and routers.
    </t>

    <t>
      There are the questions of how frequently a CA publishes, how
      often an RP pulls, and how often routers pull from their RP(s).
    </t>

    <t>
      For CAs publishing, a few seconds to a minute seems easily achieved
      with reasonable software.  See <xref target="publish"/>.
    </t>

    <t>
        The validator instances at Relying Parties periodically retrieve data
        from the CA publication services. An interval of 10 minutes is
        considered expedient and somewhat of a burden for publication
        services, specifically for one a repository which is against
        spec, but it should be achievable in a while. An hour would be the
        longest acceptable window. See <xref target="rp-pull"/>.
    </t>

    <t>
        For the EBGP router(s) pulling from the RP(s), 5 to 60 minutes is a
        wide window. But, the RPKI-RTR protocol does have the Serial
        Notify PDU, the equivalent of DNS Notify, where the cache tells
        the router that it has new data. See <xref target="router-pull"/>.
    </t>

    <t>
      We discuss each of these in detail below.
    </t>

  </section>

  <section anchor="related" title="Related Work">

    <t>It is assumed that the reader understands BGP, <xref
    target="RFC4271"/>, the RPKI <xref target="RFC6480"/>, RPKI
    Manifests <xref target="RFC6486"/>, Route Origin Authorizations
    (ROAs), <xref target="RFC6482"/>, the RPKI Repository Delta Protocol
    (RRDP) <xref target="RFC8182"/>, The Resource Public Key
    Infrastructure (RPKI) to Router Protocol <xref
    target="I-D.ietf-sidrops-8210bis"/>, RPKI-based Prefix Validation,
    <xref target="RFC6811"/>, and Origin Validation Clarifications,
    <xref target="RFC8481"/>.</t>

  </section>

  <section anchor="Struct" title="Deployment Structure">
    <t>
      Deployment of the RPKI to reach routers has a multi-tier
      structure as follows:
      <list style="hanging">
	
        <t hangText="Cerification Authorities:">
          The authoritative data of the RPKI are published in a
          distributed set of servers, Certification Authorities, at the
          IANA, RIRs, NIRs, and ISPs (see <xref target="RFC6481"/>).
        </t>
	
        <t hangText="Relying Parties:">
          Relying Parties are a local set of one or more collected and
          verified caches of RPKI data.  A Relying Party, e.g., router
          or other client, MUST have a trust relationship with, and a
          trusted transport channel to, any RP(s) it uses.
        </t>
	
        <t hangText="Routers:">
            A router fetches data from a local cache using the RPKI to
            Router Protocol described in <xref target="I-D.ietf-sidrops-8210bis"/>
            or some other distribution mechanism.  It is said to be a
            client of the cache.  There are mechanisms for the router to
            assure itself of the authenticity of the cache and to
            authenticate itself to the cache.
        </t>
	
      </list>
    </t>
  </section>

  <section anchor="publish" title="Certification Authority Publishing">
    <t>
     A principal constraint on publication timing is ensuring the CRL
     and Manifest (<xref target="RFC6486"/>) are atomically correct with
     respect to the other repository data.  With rsync, the directory
     must be atomically correct before it becomes current.  RRDP (<xref
     target="RFC8182"/>) is similar, the directory must be atomically
     correct before it is published.
    </t>
  </section>

  <section anchor="rp-pull" title="Replying Party Fetching">
    <t>
     rsync puts a load on RPKI publication point servers.  Therefore
     relying party caches have been discouraged from fetching more
     frequently than on the order of an hour.  Times as long as a day
     were even suggested.  With RRDP (<xref target="RFC8182"/>), these
     constraints are no longer relevant.
    </t>
  </section>

  <section anchor="router-pull" title="Router Updating">
    <t>
     The rate of change of ROA data can be estimated to remain small,
     maybe on the order of a few ROAs a minute, but with bursts.
     Therefore, the routers may update from the (presumed local) relying
     party cache(s) quite frequently.  Note that <xref
     target="I-D.ietf-sidrops-8210bis"/> recommends a polling interval
     of one hour.  This conservative timing is because caches can send a
     Serial Notify PDU to tell routers when there are new data to be
     fetched.
    </t>
    <t>
      A router SHOULD respond with a Serial Query when it receives a
      Serial Notify from a cache.  If a router can not respond to a
      Serial Notify, then it MUST send a periodic Serial Query no less
      frequently than once an hour.
    </t>
  </section>

  <section anchor="Security" title="Security Considerations">
    <t>
        The use of Route Origin Validation without any other protection
        mechanisms is not a security protocol. It is intended
        to catch operational errors, and is easily gamed and attacked.
    </t>
  </section>

  <section anchor="IANA" title="IANA Considerations">
    <t>
      None
    </t>
  </section>

</middle>

<back>
    
  <references title="Normative References">
    <?rfc include="reference.RFC.2119"?>
    <?rfc include="reference.RFC.4271"?>
    <?rfc include="reference.RFC.6481"?>
    <?rfc include="reference.RFC.6486"?>
    <?rfc include="reference.RFC.6482"?>
    <?rfc include="reference.RFC.6811"?>
    <?rfc include="reference.RFC.8174"?>
    <?rfc include="reference.RFC.8182"?>
<!--    <?rfc include="reference.RFC.8210"?> -->
    <?rfc include="reference.RFC.8481"?>
    <?rfc include="reference.I-D.ietf-sidrops-8210bis"?>
    </references>

  <references title="Informative References">
    <?rfc include="reference.RFC.6480"?>
    </references>


    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>
        The authors wish to thank Massimiliano Stucchi.
      </t>
    </section>

</back>

</rfc>
